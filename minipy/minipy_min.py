importreimportsysimportwarningsdefmin(filename,save=True,random_state=42):if'.py'notinfilename:warnings.warn(f'IOWarning:minipyisintendedforusewith.pyfiles.Itmaynotworkasintendedfor{filename}')code=[]withopen(filename,"r")asf:forlineinf:line=rm_whitespace(line)line=rm_inlinecomments(line)code.append(line)code=''.join(code)code=rm_docstrings(code)ifsave:newfilename=filename.replace('.py','_min.py')withopen(newfilename,'w+')asf:f.write(code)returncodedefscore(filename):withopen(filename,'r')asf:oldsize=sys.getsizeof(f.read())try:withopen(filename.replace('.py','_min.py'),'r')asf:newsize=sys.getsizeof(f.read())except:newsize=sys.getsizeof(min(filename,save=False))print(f'Yousaved{oldsize-newsize}bytes')deffit_score(filename):withopen(filename,'r')asf:oldsize=sys.getsizeof(f.read())try:withopen(filename.replace('.py','_min.py'),'r')asf:newsize=sys.getsizeof(f.read())except:newsize=sys.getsizeof(min(filename,save=True))print(f'Yousaved{oldsize-newsize}bytes')defrm_whitespace(string):fortokin['\n','\t','\r','']:string=string.replace(tok,'')returnstringdefrm_inlinecomments(line):result=[]forcharinline:ifchar!='result.append(char)else:breakreturn''.join(result)defrm_docstrings(text_block):text_block=re.sub(r'','',text_block)text_block=re.sub(r"",'',text_block)returntext_block